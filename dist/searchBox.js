"use strict";!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),a=" .search-warp { border: 1px solid #ccc; margin: 0 auto; position: relative; } .focusWarp{ border-color: #5491f5; } .search-warp input{ border: none; outline: 0; float: left; background: #f7f7f7; width: calc(100% - 60px); height: 30px; padding: 0 5px; } .search-clear { float: right; cursor: pointer; width: 15px; height: 30px; margin-right: 5px; /*background: url(http://i.thsi.cn/images/jsmodule/web/searchbox/clear.png) center center no-repeat;*/ } .search-clear-svg { vertical-align: text-top;; } .search-btn { float: right; cursor: pointer; width: 25px; height: 30px; margin-right: 5px; /*background: url(http://i.thsi.cn/images/jsmodule/web/searchbox/search.png) center center no-repeat;*/ } .search-btn-svg{ vertical-align: middle; } .placeholder{ color: #757575; } .search-dropbox{ position: absolute; top: 32px; left: -1px; width: 100%; border: 1px solid #ccc; background: #fff; z-index: 100; } .search-dropbox p{ cursor: pointer; padding-left: 5px; text-align: left; height: 30px; line-height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; } .search-dropbox p.hover{ background: #ccc; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a)),t.appendChild(e)}}();var searchBox$1={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-warp",class:{focusWarp:t.focusStatus}},[t.showSearchBtn?a("div",{staticClass:"search-btn",class:{focusBtn:t.focusStatus},on:{click:t._searchInput}},[a("svg",{staticClass:"search-btn-svg",attrs:{t:"1527132796897",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6161","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20",height:"20"}},[a("path",{attrs:{d:"M430.72 782.4C229.44 782.4 66.272 622.08 66.272 424 66.272 225.92 229.44 65.28 430.72 65.28 632 65.28 795.2 225.92 795.2 424 795.2 622.08 632 782.4 430.72 782.4L430.72 782.4ZM1014.016 968 749.728 707.84C818.912 632.64 861.44 533.44 861.44 424 861.44 189.76 668.608 0 430.72 0 192.832 0 0 189.76 0 424 0 657.92 192.832 847.68 430.72 847.68 533.504 847.68 627.776 812.16 701.824 752.96L967.168 1014.08C980.128 1026.88 1001.088 1026.88 1014.016 1014.08 1026.976 1001.6 1026.976 980.8 1014.016 968L1014.016 968Z","p-id":"6162"}})])]):t._e(),t._v(" "),t.showClearBtn?a("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.inputData&&t.inputData!=t.placeholder,expression:"inputData!='' && inputData!=placeholder"}],staticClass:"search-clear",on:{click:t._clearInput}},[a("svg",{staticClass:"search-clear-svg",attrs:{t:"1527131202262",viewBox:"0 0 1076 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2015","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"15",height:"15"}},[a("path",{attrs:{d:"M1074.977 463.141l1.763 1.396q-0.869-0.735-1.763-1.396zM0 465.15l3.184-2.523c-3.822 2.659-6.942 6.058-9.205 10.009z","p-id":"2016"}}),a("path",{attrs:{d:"M111.983 994.893c-0.282 1.886-0.576 3.759-0.833 5.657 0.53-2.012 0.843-4.326 0.86-6.71zM83.758 1021.833zM55.569 991.477q0.306-2.118 0.637-4.237c-0.43 1.794-0.687 3.859-0.71 5.981z","p-id":"2017"}}),a("path",{attrs:{d:"M1021.931 984.901c0.355 2.216 0.673 4.445 0.992 6.674-0.088-2.676-0.521-5.217-1.258-7.625zM965.272 999.46c-0.245-1.751-0.502-3.49-0.771-5.229 0.137 2.393 0.541 4.636 1.182 6.776z","p-id":"2018"}}),a("path",{attrs:{d:"M538.634 0c-282.327 0-512 229.673-512 512s229.673 512 512 512 512-229.673 512-512-229.673-512-512-512zM538.634 950.516c-241.808 0-438.528-196.757-438.528-438.528s196.721-438.516 438.528-438.516 438.528 196.721 438.528 438.528-196.757 438.528-438.528 438.528z","p-id":"2019"}}),a("path",{attrs:{d:"M748.554 305.446c-6.631-6.706-15.832-10.858-26.003-10.858-10.025 0-19.107 4.034-25.712 10.568l-158.353 156.638-155.944-156.458c-6.621-6.639-15.777-10.747-25.893-10.747-20.195 0-36.566 16.371-36.566 36.566 0 10.079 4.078 19.206 10.674 25.82l155.723 156.249-156.997 155.258c-6.704 6.632-10.856 15.833-10.856 26.003 0 20.197 16.373 36.571 36.571 36.571 10.027 0 19.112-4.036 25.718-10.571l157.214-155.512 158.466 159.030c6.568 6.345 15.524 10.255 25.393 10.255 20.194 0 36.564-16.37 36.564-36.564 0-9.814-3.867-18.726-10.16-25.293l-158.27-158.833 158.136-156.409c6.706-6.631 10.858-15.832 10.858-26.003 0-10.025-4.034-19.107-10.568-25.712z","p-id":"2020"}})])]):t._e(),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputData,expression:"inputData"},{name:"focus",rawName:"v-focus",value:t.focusStatus,expression:"focusStatus"}],ref:"searchInput",class:{placeholder:t.inputData==t.placeholder},attrs:{type:"text",id:"search_input",autocomplete:"off"},domProps:{value:t.inputData},on:{focus:t._focusFunc,blur:t._blurFunc,keyup:t._keyupFunc,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t._searchInput(e):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t._selectDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t._selectUp(e)):null}],compositionstart:t._compositionStart,compositionend:t._compositionEnd,input:function(e){e.target.composing||(t.inputData=e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDropbox,expression:"showDropbox"}],staticClass:"search-dropbox"},[t._t("dropbox-start"),t._v(" "),t._l(t.dropData,function(e,n){return a("p",{key:n,class:{hover:n==t.now},attrs:{title:t._renderDropDataTitle(e)},domProps:{innerHTML:t._s(t._renderDropData(e))},on:{mousedown:function(a){t._changeInput(e)},mouseover:function(e){t._hoverSelect(n)}}})}),t._v(" "),t._t("dropbox-end")],2)])},staticRenderFns:[],name:"searchBox",props:{showClearBtn:{type:Boolean,default:!0},showSearchBtn:{type:Boolean,default:!0},placeholder:{type:String,default:""},selectLength:{type:Number,default:5},autoFocus:{type:Boolean,default:!1},highlightSearchData:{type:Boolean,default:!1},highlightSearchColor:{type:String,default:"#f00"},useJpjl:{type:Boolean,default:!1},JpjlFun:{type:Function,default:function(){}},JpjlClientCodeType:{type:Array,default:function(){return["16","32"]}},JpjlBrowserCodeType:{type:Array,default:function(){return["stock"]}},associationFun:{type:Function,default:function(){}},noInputAssociationFun:{type:Function,default:function(){}},noInputFun:{type:Function,default:function(){}},clearInput:{type:Function,default:function(){}},search:{type:Function,default:function(){}}},data:function(){return{inputData:"",associationData:"",focusStatus:!1,showDropbox:!1,preventAssociation:!1,dropData:[],now:-1,inputPinyinFlag:!1}},mounted:function(){this.inputData=this.placeholder},directives:{focus:{update:function(t,e){e.value?t.focus():t.blur()}}},watch:{inputData:function(t,e){var a=this;t==a.placeholder||""===t&&e===a.placeholder||(a.focusStatus&&!a.preventAssociation&&a._association(),a.preventAssociation=!1)}},methods:{_focusFunc:function(t){var e=this;e.focusStatus=!0,e.inputData===e.placeholder&&(e.inputData=""),e.autoFocus&&e.$refs.searchInput.select(),""!==e.inputData?e._association():e.noInputAssociationFun()},_blurFunc:function(){var t=this;t.focusStatus=!1,t.showDropbox=!1,""===t.inputData&&(t.inputData=t.placeholder)},_keyupFunc:function(t){},_association:function _association(){var s=this;s.associationData=s.inputData,""==s.inputData?(s.noInputFun(),s.showDropbox=!1):(s.now=-1,s.useJpjl?window.external&&"createObject"in window.external?window.API.use({method:"Util.filterStock",data:{filter:s.inputData.toUpperCase(),count:s.selectLength,retmarket:!0,markets:s.JpjlClientCodeType.join(",")},success:function success(data){if(data=data.replace(/(\w)'(\w)/g,"$1\\'$2"),data=eval(data),0!==data.length)if("_default"!==s.$props.JpjlFun.name)s.showDropbox=!1,s.JpjlFun(data);else{var jsonData=[];for(var i in data)jsonData.push({key:data[i].stock,val:data[i].name});s.dropData=jsonData,s.focusStatus&&s.dropData.length>0&&(s.showDropbox=!0)}else s.associationFun(s.inputData)}}):s.$http.jsonp("http://news.10jqka.com.cn/public/index_keyboard_"+encodeURIComponent(s.inputData)+"_"+s.JpjlBrowserCodeType.join(",")+"_"+s.selectLength+"_jsonp.html",{jsonpCallback:"jsonp"}).then(function(t){if(s.JpjlBrowserCodeType.length>1){var e=0,a=[];for(var n in t.data){t.data[n].length>0&&e++;for(var o=t.data[n].length,i=0;i<o;i++){var r=t.data[n][i].split("||")[1].split(" ");a=a.concat({key:r[0],val:r[0]+" "+r[1]})}}if(0===e)return void s.associationFun(s.inputData);"_default"!==s.$props.JpjlFun.name?(s.showDropbox=!1,s.JpjlFun(t.data)):(s.dropData=a.slice(0,s.selectLength),s.focusStatus&&s.dropData.length>0&&(s.showDropbox=!0))}else{if(0===t.data.length)return void s.associationFun(s.inputData);if("_default"!==s.$props.JpjlFun.name)s.showDropbox=!1,s.JpjlFun(t.data);else{for(var c=t.data.length,p=[],u=0;u<c;u++){var l=t.data[u].split("||")[1].split(" ");p=p.concat({key:l[0],val:l[0]+" "+l[1]})}s.dropData=p,s.focusStatus&&s.dropData.length>0&&(s.showDropbox=!0)}}},function(t){console.warn("jpjl-error")}):s.associationFun(s.inputData))},_clearInput:function(){var t=this;t.inputData=t.placeholder,t.showDropbox=!1,t.clearInput()},_searchInput:function(){var t=this;t.now=-1,t.showDropbox=!1,t.focusStatus=!1,t.search(t.inputData)},_changeInput:function(t){var e=this;e.preventAssociation=!0,e.inputData="string"==typeof t?t:t.key,e.showDropbox=!1,e.now=-1,e._searchInput()},_selectDown:function(){var t=this;t.showDropbox&&(t.now++,t.now==t.dropData.length&&(t.now=0),t.preventAssociation=!0,t.inputData="string"==typeof t.dropData[t.now]?t.dropData[t.now]:t.dropData[t.now].key)},_selectUp:function(){var t=this;t.showDropbox&&(t.now--,-1==t.now&&(t.now=t.dropData.length-1),t.preventAssociation=!0,t.inputData="string"==typeof t.dropData[t.now]?t.dropData[t.now]:t.dropData[t.now].key)},_hoverSelect:function(t){this.now=t},_renderDropData:function(t){var e="string"==typeof t?t:t.val;return this.heightlight(e,this.associationData)},_renderDropDataTitle:function(t){return"string"==typeof t?t:t.val},heightlight:function(t,e){var a=this;if(!t)return"";t=""+t;var n=new RegExp(e,"gi");return t=t.replace(n,function(t){return'<span style="color: '+a.highlightSearchColor+'">'+t+"</span>"})},_compositionStart:function(){this.inputPinyinFlag=!0},_compositionEnd:function(){this.inputPinyinFlag=!1},focusInput:function(){this.autofocus=!0,this.selectFunc()},blurInput:function(){this.autofocus=!1},setInputData:function(t){this.preventAssociation=!0,this.inputData=t},getInputData:function(){return this.inputData},selectFunc:function(){this.$refs.searchInput.select()}}};module.exports=searchBox$1;
//# sourceMappingURL=searchBox.js.map
